#!/bin/sh
#
# Simple Redis init.d script conceived to work on Linux systems
# as it does use of the /proc filesystem.

### BEGIN INIT INFO
# Provides:     tomcat
# Default-Start:        2 3 4 5
# Default-Stop:         0 1 6
# Short-Description:    tomcat
# Description:          tomcat
### END INIT INFO


BASE_DIR="{{ apps_base_dir }}/apache-tomcat-8.5.42/bin/"

case "$1" in
    start)
        ps -ef | grep apache-tomcat-8.5.42 | grep -v grep | awk '{print $2}' | xargs -r kill -9 ;
        sleep 5;
        $BASE_DIR/startup.sh 
        ;;
    stop)
        ps -ef | grep tomcat | grep -v grep | awk '{print $2}' | xargs -r kill -9 ;
        ;;
    *)
        echo "Please use start or stop as first argument"
        ;;
esac
